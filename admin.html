<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Sketchno</title>
  <style>
    /* --- Reset & Base --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      min-height: 100vh;
      padding: 20px;
      color: #1e293b;
      position: relative;
    }
    body::before {
      content: '';
      position: absolute; inset: 0;
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(100,116,139,0.05) 0%, transparent 50%),
        radial-gradient(circle at 90% 80%, rgba(100,116,139,0.05) 0%, transparent 50%);
      z-index: -1;
    }

    /* --- Container --- */
    .dashboard-container {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
      padding: 32px;
      max-width: 1600px;
      margin: 0 auto;
      animation: fadeIn .6s ease;
      position: relative;
    }
    .dashboard-container::before {
      content: '';
      position: absolute; top: 0; left: 0;
      width: 100%; height: 6px;
      background: linear-gradient(90deg, #4f46e5, #8b5cf6);
    }

    @keyframes fadeIn { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }

    /* --- Heading --- */
    h2 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 24px;
      display: flex; align-items: center;
    }
    h2::before {
      content: ''; width: 8px; height: 32px;
      background: linear-gradient(90deg, #4f46e5, #8b5cf6);
      border-radius: 4px; margin-right: 16px;
    }

    /* --- Buttons --- */
    .btn {
      background: linear-gradient(135deg, #4f46e5, #8b5cf6);
      color: #fff; border: none; padding: 10px 20px;
      border-radius: 8px; cursor: pointer;
      font-weight: 600; font-size: .95rem;
      margin: 0 8px 20px 0;
      box-shadow: 0 4px 12px rgba(79,70,229,.3);
      transition: all .3s ease;
    }
    .btn:hover { transform: translateY(-2px); background: linear-gradient(135deg, #4338ca, #7c3aed); }
    .btn.delete { background: linear-gradient(135deg, #ef4444, #dc2626); box-shadow: 0 4px 12px rgba(239,68,68,.3); }
    .btn.delete:hover { background: linear-gradient(135deg, #dc2626, #b91c1c); }

    /* --- Table --- */
    table {
      width: 100%; border-collapse: collapse; margin-top: 20px;
      border-radius: 12px; overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,.05);
    }
    thead { background: #f8fafc; }
    th, td { padding: 12px; text-align: left; font-size: .875rem; }
    th { font-weight: 600; text-transform: uppercase; color: #334155; }
    tr:nth-child(even) { background: #fafafa; }
    tr:hover { background: #f8fafc; }

    input, select {
      width: 100%; padding: 8px 10px; border-radius: 8px;
      border: 1px solid #e2e8f0; background: #f8fafc;
      font-size: .875rem; font-family: inherit;
    }
    input:focus, select:focus {
      outline: none; border-color: #4f46e5;
      background: #fff; box-shadow: 0 0 0 3px rgba(79,70,229,0.1);
    }
    input[type="number"] { max-width: 80px; }

    /* Responsive */
    @media(max-width: 1000px){ table{display:block; overflow-x:auto; white-space:nowrap;} }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <h2>Admin Panel ‚Äì Sketchno Technologies</h2>
    <button class="btn" onclick="addClient()">‚ûï Add Client</button>
    <button class="btn" onclick="exportJSON()">üíæ Export JSON</button>

    <table id="projectTable">
      <thead>
        <tr>
          <th>Username</th>
          <th>Password</th>
          <th>Project</th>
          <th>Client No</th>
          <th>Started</th>
          <th>Expected End</th>
          <th>End Date</th>
          <th>Status</th>
          <th>Progress</th>
          <th>Link</th>
          <th>Milestones</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let projects = [];

    // Load data
    fetch("projects.json").then(r=>r.json()).then(data=>{
      projects = data.projects; renderTable();
    });

    function renderTable(){
      const tbody = document.querySelector("#projectTable tbody");
      tbody.innerHTML = "";
      projects.forEach((c,i)=>{
        let milestonesHTML="";
        for(let key in c.milestones){
          let v=c.milestones[key];
          milestonesHTML += `
            <div>
              <label>${key}:</label>
              <select onchange="updateMilestone(${i},'${key}',this.value)">
                <option ${v==="Pending"?"selected":""}>Pending</option>
                <option ${v==="In Progress"?"selected":""}>In Progress</option>
                <option ${v==="Complete"?"selected":""}>Complete</option>
                <option ${!(["Pending","In Progress","Complete"].includes(v))?"selected":""}>${v}</option>
              </select>
            </div>`;
        }

        tbody.innerHTML += `
          <tr>
            <td><input value="${c.username}" onchange="updateField(${i},'username',this.value)"></td>
            <td><input value="${c.password}" onchange="updateField(${i},'password',this.value)"></td>
            <td><input value="${c.project}" onchange="updateField(${i},'name',this.value)"></td>
            <td><input value="${c.clientN||""}" onchange="updateField(${i},'clientN',this.value)"></td>
            <td><input value="${c['started-date']||""}" onchange="updateField(${i},'started-date',this.value)"></td>
            <td><input value="${c['expected-end-date']||""}" onchange="updateField(${i},'expected-end-date',this.value)"></td>
            <td><input value="${c['end-date']||""}" onchange="updateField(${i},'end-date',this.value)"></td>
            <td>
              <select onchange="updateField(${i},'status',this.value)">
                <option ${c.status==="Pending"?"selected":""}>Pending</option>
                <option ${c.status==="Working"?"selected":""}>Working</option>
                <option ${c.status==="Completed"?"selected":""}>Completed</option>
              </select>
            </td>
            <td><input type="number" min="0" max="100" value="${c.progress}" onchange="updateField(${i},'progress',this.value)"></td>
            <td><input value="${c.link||""}" onchange="updateField(${i},'link',this.value)"></td>
            <td>${milestonesHTML}</td>
            <td><button class="btn delete" onclick="deleteClient(${i})">‚ùå</button></td>
          </tr>`;
      });
    }

    function updateField(i,field,val){ projects[i][field]=val; }
    function updateMilestone(i,m,v){ projects[i].milestones[m]=v; }

    function addClient(){
      projects.push({
        username:"client", password:"password", name:"new project",
        clientN:"110", "started-date":"18 sep 2025", "expected-end-date":"20 sep 2025", "end-date":"",
        status:"Pending", progress:0, link:"----",
        milestones:{ Header:"Pending", Body:"Pending", Footer:"Pending", Testing:"Pending" },
        image:"https://via.placeholder.com/250"
      });
      renderTable();
    }
    function deleteClient(i){ if(confirm("Delete this client?")){ projects.splice(i,1); renderTable(); } }
    function exportJSON(){
      const blob = new Blob([JSON.stringify({projects},null,2)],{type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href=url; a.download="projects.json"; a.click(); URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>

